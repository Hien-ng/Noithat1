"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var subProcess = require("../sub-process");
function detect(targetImage) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var info, error_1;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 2, , 3]);
                    return [4 /*yield*/, subProcess.execute('docker', ['inspect', targetImage])];
                case 1:
                    info = _a.sent();
                    return [2 /*return*/, JSON.parse(info)[0].Id];
                case 2:
                    error_1 = _a.sent();
                    throw new Error("Docker image was not found locally: " + targetImage);
                case 3: return [2 /*return*/];
            }
        });
    });
}
exports.detect = detect;
//# sourceMappingURL=image-id-detector.js.map